import{a as d}from"./CCb-kr4I.js";import{c as r,f as m,q as w}from"./igMEG2lE.js";function I(){const a=r([]),c=r([]),l=r(!0),o=r(!1),i="https://str-gsstudio.gsstudio.com.br",h="1",u=4,n=r(u),f=async e=>{try{const t=await d.get(`${i}/tenants/${e}`);a.value=t.data.articles.sort((s,T)=>new Date(T.published_at).getTime()-new Date(s.published_at).getTime()).map(s=>({...s,imageLoaded:!1}))}catch(t){console.error("Error fetching articles:",t)}finally{l.value=!1}},b=()=>{o.value||!g.value||(o.value=!0,setTimeout(()=>{n.value+=u,o.value=!1},1e3))},p=m(()=>a.value.slice(0,n.value)),g=m(()=>n.value<a.value.length),v=async()=>{try{const e=await d.get(`${i}/categories`);c.value=e.data}catch(e){console.error("Error fetching categories:",e)}},_=e=>e.thumb&&e.thumb.url?new URL(e.thumb.url,i).href:"https://s3.gsstudio.com.br/gsstudio/site/img/thumb_blog_gsstudio.webp",y=e=>{const t=e.target;t.src="https://s3.gsstudio.com.br/gsstudio/site/img/thumb_blog_gsstudio.webp"},A=e=>{const t=c.value.find(s=>s.id===e);return t?t.title:"Categoria desconhecida"};return w(()=>{f(h),v()}),{articles:p,categories:c,loading:l,loadingMore:o,loadMoreArticles:b,hasMoreArticles:g,getArticleImage:_,getCategoryTitle:A,handleImageError:y}}export{I as u};
