import{_ as v}from"./FnLJ056p.js";import{a as g}from"./B4uVmeYG.js";import{u as w,p as L,_ as R}from"./CmsOxrMn.js";import{d as T,c as _,o as I,C as r,O as o,m as $,D as A,P as m,B as c,Q as C,R as k,U as D}from"./BiXghscm.js";var S={};const B=T({name:"ArticleDetail",setup(){const t=_(null),n=_([]),l=w(),a=S.VITE_STRAPI_URL||"https://str-gsstudio.gsstudio.com.br",d=async e=>{try{console.log(`Fetching article from ${a}/articles?slug=${e}`);const s=await g.get(`${a}/articles?slug=${e}`);console.log("Response:",s),s.data.length?t.value=s.data[0]:console.error("Article not found")}catch(s){console.error("Error fetching article:",s.response?s.response.data:s.message)}},u=async()=>{try{console.log(`Fetching categories from ${a}/categories`);const e=await g.get(`${a}/categories`);console.log("Response:",e),n.value=e.data}catch(e){console.error("Error fetching categories:",e.response?e.response.data:e.message)}},i=e=>{if(e.thumb&&e.thumb.url){const s=new URL(e.thumb.url,a).href;return console.log("Generated image URL:",s),s}return"/thumb_blog_gsstudio.webp"},p=e=>{if(!e)return"";const s={weekday:"long",year:"numeric",month:"long",day:"numeric"};return new Date(e).toLocaleDateString("pt-BR",s)},f=e=>{const s=n.value.find(b=>b.id===e);return s?s.title:"Categoria desconhecida"},y=e=>e&&e.thumb&&e.thumb.url;return I(async()=>{const e=l.params.slug;console.log("Fetching article with slug:",e),await d(e),await u(),console.log("Article:",t.value),console.log("Categories:",n.value)}),{article:t,categories:n,getArticleImage:i,getCategoryTitle:f,formatDate:p,hasThumbnail:y}}}),U=L("/thumb_blog_gsstudio.webp"),h=t=>(k("data-v-d21ce503"),t=t(),D(),t),M={class:"my-5",id:"article-detail"},V={class:"container my-5"},E={class:"row"},H={class:"col-2"},N={class:"col-7"},F={key:0},P={class:"mb-3"},G={class:"article-category"},O=["innerHTML"],Q={class:"my-4"},j={key:0},q=["srcset"],z=["src","alt"],J={key:1,src:U,class:"img-fluid",alt:"Default Image"},K=["innerHTML"],W={key:1},X=h(()=>o("p",null,"Carregando artigo...",-1)),Y=[X],Z=h(()=>o("div",{class:"col-3"},null,-1));function x(t,n,l,a,d,u){const i=v;return c(),r("main",null,[o("section",M,[o("div",V,[o("div",E,[o("div",H,[$(i,{to:"/blog",class:"btn btn-primary-border"},{default:A(()=>[C("< Voltar")]),_:1})]),o("div",N,[t.article?(c(),r("div",F,[o("div",P,[o("span",G,m(t.getCategoryTitle(t.article.category)),1),o("span",{innerHTML:t.formatDate(t.article.published_at),class:"mx-5"},null,8,O)]),o("h2",null,m(t.article.titulo),1),o("div",Q,[t.hasThumbnail(t.article)?(c(),r("picture",j,[o("source",{srcset:t.getArticleImage(t.article)},null,8,q),o("img",{src:t.getArticleImage(t.article),class:"img-fluid",alt:t.article.titulo},null,8,z)])):(c(),r("img",J))]),o("div",{innerHTML:t.article.content},null,8,K)])):(c(),r("div",W,Y))]),Z])])])])}const ae=R(B,[["render",x],["__scopeId","data-v-d21ce503"]]);export{ae as default};
