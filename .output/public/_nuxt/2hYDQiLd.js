import{a as w}from"./CCb-kr4I.js";import{u as B,b as C,_ as N}from"./DWyQgJKb.js";import{d as F,c as r,q as M,E as i,G as t,F as H,X as R,Y as V,W as k,Z as b,C as y,_ as z,$ as U,H as g,D as l}from"./BvFpDmto.js";const j=F({name:"ArticleDetail",setup(){const e=r(null),s=r(!0),p=r(!1),h=r([]),v=B(),f=C(),a="https://str-gsstudio.gsstudio.com.br",d=r(""),u=r(!1),c=r(!1),m=r(!1),L=async o=>{try{const n=await w.get(`${a}/articles?slug=${o}`);n.data.length&&(e.value=n.data[0])}catch(n){console.error("Erro ao buscar o artigo:",n)}finally{s.value=!1}},I=o=>o.thumb&&o.thumb.url?new URL(o.thumb.url,a).href:"https://s3.gsstudio.com.br/gsstudio/site/img/thumb_blog_gsstudio.webp",_=o=>{if(!o)return"";const n={weekday:"long",year:"numeric",month:"long",day:"numeric"};return new Date(o).toLocaleDateString("pt-BR",n)},E=o=>o&&o.thumb&&o.thumb.url,$=()=>{p.value=!0},T=o=>{const n=o.target;n.src="https://s3.gsstudio.com.br/gsstudio/site/img/thumb_blog_gsstudio.webp"},S=()=>{f.go(-1)},A=o=>{o.name==="Link"?navigator.clipboard.writeText(o.url):window.open(o.url,"_blank","noopener,noreferrer")},D=async()=>{u.value=!0,c.value=!1,m.value=!1;const o="https://webhook.gsstudio.com.br/webhook/gsstudionewsletter";try{const n=await w.post(o,{email:d.value},{headers:{"Content-Type":"application/json"}});n.status>=200&&n.status<300?(c.value=!0,setTimeout(()=>{d.value="",c.value=!1},2e3)):m.value=!0}catch{m.value=!0}finally{u.value=!1}};return M(async()=>{const o=v.params.slug;await L(o),h.value=[{name:"Facebook",url:`https://facebook.com/sharer/sharer.php?u=${window.location.href}`,icon:"bx bxl-facebook"},{name:"Twitter",url:`https://twitter.com/intent/tweet?url=${window.location.href}`,icon:"bx bxl-twitter"},{name:"LinkedIn",url:`https://www.linkedin.com/shareArticle?mini=true&url=${window.location.href}`,icon:"bx bxl-linkedin"},{name:"WhatsApp",url:`https://wa.me/?text=${window.location.href}`,icon:"bx bxl-whatsapp"},{name:"Email",url:`mailto:?subject=Confira este artigo&body=${window.location.href}`,icon:"bx bx-envelope"},{name:"Link",url:window.location.href,icon:"bx bx-link"}]}),{article:e,loading:s,imageLoaded:p,email:d,socialNetworks:h,getArticleImage:I,hasThumbnail:E,formatDate:_,onImageLoad:$,goBack:S,share:A,submitNewsletterForm:D,handleImageError:T,isSubmitting:u,success:c,error:m}}}),q={class:"my-5",id:"article-detail"},W={class:"container my-5"},G={class:"row"},X={class:"col-lg-2 col-sm-12 col-md-12 mb-4"},Y={class:"back-fixed"},Z={class:"social-share d-flex"},J=["href","title","onClick"],K={class:"col-sm-7 col-md-12 col-lg-7"},O={key:0},P={key:1,class:"content_blog"},Q={class:"mb-3 mx-0"},x={class:"article-category"},ee=["innerHTML"],se={class:"my-4"},te={key:0},oe=["srcset"],ae=["src","alt"],ne=["innerHTML"],ie={key:2},le={class:"col-sm-12 col-md-12 col-lg-3"},re={class:"newsletter-cta p-4 bg-light rounded news-fixed my-xl-0 my-4"},de={class:"mb-3"},ue={class:""},ce=["disabled"],me={key:0},be={key:1},ge={key:2},pe={key:3};function he(e,s,p,h,v,f){return l(),i("main",null,[t("section",q,[t("div",W,[t("div",G,[t("div",X,[t("div",Y,[t("button",{onClick:s[0]||(s[0]=(...a)=>e.goBack&&e.goBack(...a)),class:"btn btn-primary-border"},"< Voltar"),t("div",Z,[(l(!0),i(H,null,R(e.socialNetworks,(a,d)=>(l(),i("a",{key:d,href:a.url,target:"_blank",class:"social-icon",title:a.name,onClick:y(u=>e.share(a),["prevent"])},[t("i",{class:b(a.icon)},null,2)],8,J))),128))])])]),t("div",K,[e.loading?(l(),i("div",O,s[7]||(s[7]=[V('<div class="d-flex mb-3" data-v-e4d6d82c><div class="skeleton skeleton-category me-2" data-v-e4d6d82c></div><div class="skeleton skeleton-date" data-v-e4d6d82c></div></div><div class="skeleton skeleton-title mb-3" data-v-e4d6d82c></div><div class="skeleton skeleton-img mb-3" data-v-e4d6d82c></div><div class="skeleton skeleton-content mb-3" data-v-e4d6d82c></div>',4)]))):e.article?(l(),i("div",P,[t("div",Q,[t("span",x,k(e.article.category.title),1),t("span",{innerHTML:e.formatDate(e.article.published_at),class:"mx-3 publish_date"},null,8,ee)]),t("h1",null,k(e.article.titulo),1),t("div",se,[e.hasThumbnail(e.article)?(l(),i("picture",te,[t("source",{srcset:e.getArticleImage(e.article),onLoad:s[1]||(s[1]=(...a)=>e.onImageLoad&&e.onImageLoad(...a))},null,40,oe),t("img",{src:e.getArticleImage(e.article),class:b(["img-fluid blur-effect",{blurred:!e.imageLoaded}]),alt:e.article.titulo,onLoad:s[2]||(s[2]=(...a)=>e.onImageLoad&&e.onImageLoad(...a)),onError:s[3]||(s[3]=(...a)=>e.handleImageError&&e.handleImageError(...a)),loading:"lazy"},null,42,ae)])):(l(),i("img",{key:1,src:"https://s3.gsstudio.com.br/gsstudio/site/img/thumb_blog_gsstudio.webp",class:b(["img-fluid blur-effect",{blurred:!e.imageLoaded}]),alt:"Default Image",loading:"lazy",onLoad:s[4]||(s[4]=(...a)=>e.onImageLoad&&e.onImageLoad(...a)),style:{width:"100%"}},null,34))]),t("div",{innerHTML:e.article.content},null,8,ne)])):(l(),i("div",ie,s[8]||(s[8]=[t("p",null,"Artigo não encontrado.",-1)])))]),t("div",le,[t("div",re,[s[13]||(s[13]=t("h3",null,"Assine para novas atualizações.",-1)),t("form",{onSubmit:s[6]||(s[6]=y((...a)=>e.submitNewsletterForm&&e.submitNewsletterForm(...a),["prevent"])),class:"form"},[t("div",de,[z(t("input",{"onUpdate:modelValue":s[5]||(s[5]=a=>e.email=a),type:"email",class:"form-control",id:"email",name:"email",placeholder:"E-mail",required:""},null,512),[[U,e.email]])]),t("div",ue,[t("button",{type:"submit",class:b(["btn",e.isSubmitting?"btn-secondary":e.success?"btn-success":e.error?"btn-danger":"btn-primary"]),disabled:e.isSubmitting},[e.isSubmitting?(l(),i("span",me,s[9]||(s[9]=[t("span",{class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"},null,-1),g(" Enviando... ")]))):e.success?(l(),i("span",be,s[10]||(s[10]=[t("i",{class:"bx bx-check-circle"},null,-1),g(" Sucesso! ")]))):e.error?(l(),i("span",ge,s[11]||(s[11]=[t("i",{class:"bx bx-error"},null,-1),g(" Erro ao enviar! ")]))):(l(),i("span",pe,s[12]||(s[12]=[t("i",{class:"bx bx-send"},null,-1),g(" Inscrever-se ")])))],10,ce)])],32)])])])])])])}const ke=N(j,[["render",he],["__scopeId","data-v-e4d6d82c"]]);export{ke as default};
