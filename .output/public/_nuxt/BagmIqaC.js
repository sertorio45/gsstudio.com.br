import{a as _,_ as p}from"./mex7rR4C.js";import{u as T,a as $,_ as A}from"./DjdvayvA.js";import{d as C,c as i,o as S,C as r,O as t,P as v,m as D,V as b,E,B as l,R as V,U as M,W as U}from"./I6lEao-9.js";import"./BS6bRRjH.js";var H={};const N=C({name:"ArticleDetail",setup(){const e=i(null),a=i([]),d=i(!0),u=i(!1),m=T(),h=$(),n=H.VITE_STRAPI_URL||"https://str-gsstudio.gsstudio.com.br",g=async o=>{try{console.log(`Fetching article from ${n}/articles?slug=${o}`);const s=await _.get(`${n}/articles?slug=${o}`);console.log("Response:",s),s.data.length?e.value=s.data[0]:console.error("Article not found")}catch(s){console.error("Error fetching article:",s.response?s.response.data:s.message)}finally{d.value=!1}},c=async()=>{try{console.log(`Fetching categories from ${n}/categories`);const o=await _.get(`${n}/categories`);console.log("Response:",o),a.value=o.data}catch(o){console.error("Error fetching categories:",o.response?o.response.data:o.message)}},y=o=>{if(o.thumb&&o.thumb.url){const s=new URL(o.thumb.url,n).href;return console.log("Generated image URL:",s),s}return"/thumb_blog_gsstudio.webp"},k=o=>{if(!o)return"";const s={weekday:"long",year:"numeric",month:"long",day:"numeric"};return new Date(o).toLocaleDateString("pt-BR",s)},L=o=>{const s=a.value.find(B=>B.id===o);return s?s.title:"Categoria desconhecida"},I=o=>o&&o.thumb&&o.thumb.url,w=()=>{u.value=!0},R=()=>{h.go(-1)};return S(async()=>{const o=m.params.slug;console.log("Fetching article with slug:",o),await g(o),await c(),console.log("Article:",e.value),console.log("Categories:",a.value)}),{article:e,categories:a,loading:d,imageLoaded:u,getArticleImage:y,getCategoryTitle:L,formatDate:k,hasThumbnail:I,onImageLoad:w,goBack:R}}}),f=e=>(V("data-v-8c96b36c"),e=e(),M(),e),z={class:"my-5",id:"article-detail"},F={class:"container my-5"},P={class:"row"},G={class:"col-2"},O={class:"col-7"},W={key:0},j=U('<div class="d-flex mb-3" data-v-8c96b36c><div class="skeleton skeleton-category me-2" data-v-8c96b36c></div> <div class="skeleton skeleton-date" data-v-8c96b36c></div></div><div class="skeleton skeleton-title mb-3" data-v-8c96b36c></div><div class="skeleton skeleton-img mb-3" data-v-8c96b36c></div><div class="skeleton skeleton-content mb-3" data-v-8c96b36c></div>',4),q=[j],J={key:1},K={class:"mb-3"},Q={class:"article-category"},X=["innerHTML"],Y={class:"my-4"},Z={key:0},x=["srcset"],ee=["innerHTML"],oe={key:2},se=f(()=>t("p",null,"Artigo nÃ£o encontrado.",-1)),te=[se],ae=f(()=>t("div",{class:"col-3"},null,-1));function ne(e,a,d,u,m,h){const n=p,g=p;return l(),r("main",null,[t("section",z,[t("div",F,[t("div",P,[t("div",G,[t("button",{onClick:a[0]||(a[0]=(...c)=>e.goBack&&e.goBack(...c)),class:"btn btn-primary-border"},"< Voltar")]),t("div",O,[e.loading?(l(),r("div",W,q)):e.article?(l(),r("div",J,[t("div",K,[t("span",Q,v(e.getCategoryTitle(e.article.category)),1),t("span",{innerHTML:e.formatDate(e.article.published_at),class:"mx-5"},null,8,X)]),t("h2",null,v(e.article.titulo),1),t("div",Y,[e.hasThumbnail(e.article)?(l(),r("picture",Z,[t("source",{srcset:e.getArticleImage(e.article),onLoad:a[1]||(a[1]=(...c)=>e.onImageLoad&&e.onImageLoad(...c))},null,40,x),D(n,{src:e.getArticleImage(e.article),class:b(["img-fluid blur-effect",{blurred:!e.imageLoaded}]),alt:e.article.titulo,onLoad:e.onImageLoad,lazy:"loading"},null,8,["src","class","alt","onLoad"])])):(l(),E(g,{key:1,src:"/thumb_blog_gsstudio.webp",class:b(["img-fluid blur-effect",{blurred:!e.imageLoaded}]),alt:"Default Image",lazy:"loading",onLoad:e.onImageLoad},null,8,["class","onLoad"]))]),t("div",{innerHTML:e.article.content},null,8,ee)])):(l(),r("div",oe,te))]),ae])])])])}const de=A(N,[["render",ne],["__scopeId","data-v-8c96b36c"]]);export{de as default};
