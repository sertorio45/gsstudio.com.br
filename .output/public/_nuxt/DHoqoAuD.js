import{_ as A}from"./CdkcmM4b.js";import{_ as S}from"./CmFMxDQ4.js";import{a as M}from"./CCb-kr4I.js";import{u as N}from"./Ckq4sRNl.js";import{d as P,c as u,f as T,o as V,C as i,O as t,q as v,D as h,Q as y,F as b,R as $,B as r,U as D,V as R,P as C}from"./Cmk6LNsE.js";import{_ as z}from"./DK_eOVby.js";import"./DbGX282s.js";const j=P({name:"Blog",setup(){const s=u([]),e=u([]),f=u(!0),d=u(!1),m="https://str-gsstudio.gsstudio.com.br",k="1",l=4,c=u(l);N({title:"Blog - Soluções em Marketing, Design e Tecnologia | Ribeirão Preto, Sertãozinho, São Paulo e Brasil"});const p=async a=>{try{const n=await M.get(`${m}/tenants/${a}`);s.value=n.data.articles.sort((g,x)=>new Date(x.published_at).getTime()-new Date(g.published_at).getTime()).map(g=>({...g,imageLoaded:!1}))}catch(n){console.error("Error fetching articles:",n)}finally{f.value=!1}},o=()=>{d.value||!w.value||(d.value=!0,setTimeout(()=>{c.value+=l,d.value=!1},1e3))},_=T(()=>s.value.slice(0,c.value)),w=T(()=>c.value<s.value.length),B=async()=>{try{const a=await M.get(`${m}/categories`);e.value=a.data}catch(a){console.error("Error fetching categories:",a)}},E=a=>a.thumb&&a.thumb.url?new URL(a.thumb.url,m).href:"https://s3.gsstudio.com.br/gsstudio/site/img/thumb_blog_gsstudio.webp",I=a=>{const n=a.target;n.src="https://s3.gsstudio.com.br/gsstudio/site/img/thumb_blog_gsstudio.webp"},L=a=>{const n=e.value.find(g=>g.id===a);return n?n.title:"Categoria desconhecida"};return V(()=>{p(k),B()}),{articles:_,loading:f,loadingMore:d,getArticleImage:E,getCategoryTitle:L,loadMoreArticles:o,hasMoreArticles:w,handleImageError:I}}}),U={class:"py-5 bg-dark d-flex my-5",id:"topo"},F={class:"container d-flex justify-content-center align-items-center my-5 py-5"},q={class:"row"},O={class:"col text-center text-light my-2"},Q={class:"my-2"},G={href:"#blog"},H={class:"py-5 justify-content-center align-content-center",id:"blog"},J={class:"container my-5"},K={class:"row"},W={class:"card"},X={class:"image-container"},Y=["src","alt","onLoad"],Z={class:"card-body"},tt={class:"mb-2"},et={class:"article-category"},st={class:"row my-5"},ot={class:"col d-flex align-content-center justify-content-center"},at=["disabled"],nt={key:0,class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"},it={key:1};function rt(s,e,f,d,m,k){const l=A,c=S,p=A;return r(),i(b,null,[t("section",U,[t("div",F,[t("div",q,[t("div",O,[t("div",Q,[v(l,{to:"/",class:"text-light"},{default:h(()=>e[2]||(e[2]=[y("Página inicial")])),_:1}),e[3]||(e[3]=y(" / ")),e[4]||(e[4]=t("span",null,"Blog",-1))]),e[5]||(e[5]=t("h1",{class:"text-light"},"Blog",-1)),t("a",G,[v(c,{icon:"bx bxs-chevrons-down my-3",fontSize:"3em",color:"#fff"})])])])])]),t("section",H,[t("div",J,[t("div",K,[s.loading&&s.articles.length===0?(r(),i(b,{key:0},$(4,o=>t("div",{class:"col-md-3 my-5",key:o},e[6]||(e[6]=[D('<div class="card" data-v-dd81981c><div class="image-container" data-v-dd81981c><div class="skeleton skeleton-img" data-v-dd81981c></div></div><div class="card-body" data-v-dd81981c><div class="mb-2" data-v-dd81981c><div class="skeleton skeleton-category" data-v-dd81981c></div></div><div class="skeleton skeleton-title" data-v-dd81981c></div></div></div>',1)]))),64)):(r(!0),i(b,{key:1},$(s.articles,o=>(r(),i("div",{class:"col-sm-3 my-2",key:o.id},[t("div",W,[t("div",X,[v(p,{to:`${o.slug}`},{default:h(()=>[t("img",{src:s.getArticleImage(o),class:R(["img-fluid blur-effect",{blurred:!o.imageLoaded}]),alt:o.titulo,onLoad:_=>o.imageLoaded=!0,onError:e[0]||(e[0]=_=>s.handleImageError(_)),loading:"lazy"},null,42,Y)]),_:2},1032,["to"])]),t("div",Z,[t("div",tt,[t("span",et,C(s.getCategoryTitle(o.category)),1)]),v(l,{to:`${o.slug}`},{default:h(()=>[y(C(o.titulo),1)]),_:2},1032,["to"])])])]))),128))]),t("div",st,[t("div",ot,[t("button",{onClick:e[1]||(e[1]=(...o)=>s.loadMoreArticles&&s.loadMoreArticles(...o)),disabled:s.loadingMore||!s.hasMoreArticles,class:"btn btn-primary"},[s.loadingMore?(r(),i("span",nt)):(r(),i("span",it,"Ver mais artigos"))],8,at)])])])])],64)}const vt=z(j,[["render",rt],["__scopeId","data-v-dd81981c"]]);export{vt as default};
