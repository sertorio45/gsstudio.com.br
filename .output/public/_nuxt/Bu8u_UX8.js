import{_ as h}from"./D4L59rKR.js";import{a as b}from"./B4uVmeYG.js";import{u as A,a as R,_ as T}from"./60C20x6n.js";import{d as S,c,o as C,C as r,O as s,P as f,m as D,V as _,E,B as l,R as F,U as M,W as V}from"./D07QTfFV.js";import"./DtTkLN5W.js";const z=S({name:"ArticleDetail",setup(){const e=c(null),a=c([]),d=c(!0),m=c(!1),g=A(),p=R(),n="https://str-gsstudio.gsstudio.com.br",u=async o=>{try{console.log(`Fetching article from ${n}/articles?slug=${o}`);const t=await b.get(`${n}/articles?slug=${o}`);console.log("Response:",t),t.data.length?e.value=t.data[0]:console.error("Article not found")}catch(t){console.error("Error fetching article:",t.response?t.response.data:t.message)}finally{d.value=!1}},i=async()=>{try{console.log(`Fetching categories from ${n}/categories`);const o=await b.get(`${n}/categories`);console.log("Response:",o),a.value=o.data}catch(o){console.error("Error fetching categories:",o.response?o.response.data:o.message)}},k=o=>{if(o.thumb&&o.thumb.url){const t=new URL(o.thumb.url,n).href;return console.log("Generated image URL:",t),t}return"/thumb_blog_gsstudio.webp"},y=o=>{if(!o)return"";const t={weekday:"long",year:"numeric",month:"long",day:"numeric"};return new Date(o).toLocaleDateString("pt-BR",t)},w=o=>{if(!o)return"";const t=a.value.find($=>$.id===o);return t?t.title:""},L=o=>o&&o.thumb&&o.thumb.url,I=()=>{m.value=!0},B=()=>{p.go(-1)};return C(async()=>{const o=g.params.slug;console.log("Fetching article with slug:",o),await u(o),await i(),console.log("Article:",e.value),console.log("Categories:",a.value)}),{article:e,categories:a,loading:d,imageLoaded:m,getArticleImage:k,getCategoryTitle:w,formatDate:y,hasThumbnail:L,onImageLoad:I,goBack:B}}}),v=e=>(F("data-v-15d43160"),e=e(),M(),e),H={class:"my-5",id:"article-detail"},N={class:"container my-5"},U={class:"row"},O={class:"col-2"},P={class:"sticky-top"},q={class:"col-7"},G={key:0},W=V('<div class="d-flex mb-3" data-v-15d43160><div class="skeleton skeleton-category me-2" data-v-15d43160></div> <div class="skeleton skeleton-date" data-v-15d43160></div></div><div class="skeleton skeleton-title mb-3" data-v-15d43160></div><div class="skeleton skeleton-img mb-3" data-v-15d43160></div><div class="skeleton skeleton-content mb-3" data-v-15d43160></div>',4),j=[W],J={key:1},K={class:"mb-3"},Q={class:"article-category"},X=["innerHTML"],Y={class:"my-4"},Z={key:0},x=["srcset"],ee=["innerHTML"],se={key:2},oe=v(()=>s("p",null,"Artigo não encontrado.",-1)),te=[oe],ae=v(()=>s("div",{class:"col-3 p-5"},[s("div",{class:"sticky-top"},[s("div",{class:"social-links mb-4"},[s("a",{href:"https://www.facebook.com",class:"d-block mb-2",target:"_blank"},"Facebook"),s("a",{href:"https://www.twitter.com",class:"d-block mb-2",target:"_blank"},"Twitter"),s("a",{href:"https://www.linkedin.com",class:"d-block mb-2",target:"_blank"},"LinkedIn")]),s("div",{class:"newsletter-cta p-4 sticky-top bg-light rounded"},[s("h3",null,"Assine para novas atualizações."),s("form",{method:"POST",action:"https://forms.hsforms.com/submissions/v3/public/submit/formsnext/multipart/20534155/d57a69e4-6f43-4768-a600-5f7d30306260",class:"form"},[s("div",{class:"mb-3"},[s("input",{type:"email",class:"form-control",id:"email",name:"email",placeholder:"E-mail",required:""})]),s("button",{type:"submit",class:"btn btn-primary"},"Inscrever-se")])])])],-1));function ne(e,a,d,m,g,p){const n=h,u=h;return l(),r("main",null,[s("section",H,[s("div",N,[s("div",U,[s("div",O,[s("div",P,[s("button",{onClick:a[0]||(a[0]=(...i)=>e.goBack&&e.goBack(...i)),class:"btn btn-primary-border"},"< Voltar")])]),s("div",q,[e.loading?(l(),r("div",G,j)):e.article?(l(),r("div",J,[s("div",K,[s("span",Q,f(e.article.category.title),1),s("span",{innerHTML:e.formatDate(e.article.published_at),class:"mx-5"},null,8,X)]),s("h1",null,f(e.article.titulo),1),s("div",Y,[e.hasThumbnail(e.article)?(l(),r("picture",Z,[s("source",{srcset:e.getArticleImage(e.article),onLoad:a[1]||(a[1]=(...i)=>e.onImageLoad&&e.onImageLoad(...i))},null,40,x),D(n,{src:e.getArticleImage(e.article),class:_(["img-fluid blur-effect",{blurred:!e.imageLoaded}]),alt:e.article.titulo,onLoad:e.onImageLoad,lazy:"loading"},null,8,["src","class","alt","onLoad"])])):(l(),E(u,{key:1,src:"/thumb_blog_gsstudio.webp",class:_(["img-fluid blur-effect",{blurred:!e.imageLoaded}]),alt:"Default Image",lazy:"loading",onLoad:e.onImageLoad},null,8,["class","onLoad"]))]),s("div",{innerHTML:e.article.content},null,8,ee)])):(l(),r("div",se,te))]),ae])])])])}const me=T(z,[["render",ne],["__scopeId","data-v-15d43160"]]);export{me as default};
