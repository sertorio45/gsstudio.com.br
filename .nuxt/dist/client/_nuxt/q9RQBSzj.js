import{_ as A}from"./C9F6Rhcp.js";import{_ as N}from"./CmFMxDQ4.js";import{a as $}from"./CCb-kr4I.js";import{d as V,c as u,f as C,o as D,C as i,O as t,q as _,D as h,Q as y,F as b,R as T,B as r,U as P,V as R,P as E}from"./Cmk6LNsE.js";import{_ as S}from"./hu2dajrZ.js";const j=V({name:"Blog",setup(){const e=u([]),s=u([]),v=u(!0),d=u(!1),f="https://str-gsstudio.gsstudio.com.br",k="1",l=4,c=u(l),p=async a=>{try{const n=await $.get(`${f}/tenants/${a}`);e.value=n.data.articles.sort((g,B)=>new Date(B.published_at).getTime()-new Date(g.published_at).getTime()).map(g=>({...g,imageLoaded:!1}))}catch(n){console.error("Error fetching articles:",n)}finally{v.value=!1}},o=()=>{d.value||!w.value||(d.value=!0,setTimeout(()=>{c.value+=l,d.value=!1},1e3))},m=C(()=>e.value.slice(0,c.value)),w=C(()=>c.value<e.value.length),I=async()=>{try{const a=await $.get(`${f}/categories`);s.value=a.data}catch(a){console.error("Error fetching categories:",a)}},L=a=>a.thumb&&a.thumb.url?new URL(a.thumb.url,f).href:"https://s3.gsstudio.com.br/gsstudio/site/img/thumb_blog_gsstudio.webp",M=a=>{const n=a.target;n.src="https://s3.gsstudio.com.br/gsstudio/site/img/thumb_blog_gsstudio.webp"},x=a=>{const n=s.value.find(g=>g.id===a);return n?n.title:"Categoria desconhecida"};return D(()=>{p(k),I()}),{articles:m,loading:v,loadingMore:d,getArticleImage:L,getCategoryTitle:x,loadMoreArticles:o,hasMoreArticles:w,handleImageError:M}}}),z={class:"py-5 bg-dark d-flex my-5",id:"topo"},U={class:"container d-flex justify-content-center align-items-center my-5 py-5"},F={class:"row"},q={class:"col text-center text-light my-2"},O={class:"my-2"},Q={href:"#blog"},G={class:"py-5 justify-content-center align-content-center",id:"blog"},H={class:"container my-5"},J={class:"row"},K={class:"card"},W={class:"image-container"},X=["src","alt","onLoad"],Y={class:"card-body"},Z={class:"mb-2"},tt={class:"article-category"},st={class:"row my-5"},et={class:"col d-flex align-content-center justify-content-center"},ot=["disabled"],at={key:0,class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"},nt={key:1};function it(e,s,v,d,f,k){const l=A,c=N,p=A;return r(),i(b,null,[t("section",z,[t("div",U,[t("div",F,[t("div",q,[t("div",O,[_(l,{to:"/",class:"text-light"},{default:h(()=>s[2]||(s[2]=[y("PÃ¡gina inicial")])),_:1}),s[3]||(s[3]=y(" / ")),s[4]||(s[4]=t("span",null,"Blog",-1))]),s[5]||(s[5]=t("h1",{class:"text-light"},"Blog",-1)),t("a",Q,[_(c,{icon:"bx bxs-chevrons-down my-3",fontSize:"3em",color:"#fff"})])])])])]),t("section",G,[t("div",H,[t("div",J,[e.loading&&e.articles.length===0?(r(),i(b,{key:0},T(4,o=>t("div",{class:"col-md-3 my-5",key:o},s[6]||(s[6]=[P('<div class="card" data-v-f68df4f3><div class="image-container" data-v-f68df4f3><div class="skeleton skeleton-img" data-v-f68df4f3></div></div><div class="card-body" data-v-f68df4f3><div class="mb-2" data-v-f68df4f3><div class="skeleton skeleton-category" data-v-f68df4f3></div></div><div class="skeleton skeleton-title" data-v-f68df4f3></div></div></div>',1)]))),64)):(r(!0),i(b,{key:1},T(e.articles,o=>(r(),i("div",{class:"col-sm-3 my-2",key:o.id},[t("div",K,[t("div",W,[_(p,{to:`${o.slug}`},{default:h(()=>[t("img",{src:e.getArticleImage(o),class:R(["img-fluid blur-effect",{blurred:!o.imageLoaded}]),alt:o.titulo,onLoad:m=>o.imageLoaded=!0,onError:s[0]||(s[0]=m=>e.handleImageError(m)),loading:"lazy"},null,42,X)]),_:2},1032,["to"])]),t("div",Y,[t("div",Z,[t("span",tt,E(e.getCategoryTitle(o.category)),1)]),_(l,{to:`${o.slug}`},{default:h(()=>[y(E(o.titulo),1)]),_:2},1032,["to"])])])]))),128))]),t("div",st,[t("div",et,[t("button",{onClick:s[1]||(s[1]=(...o)=>e.loadMoreArticles&&e.loadMoreArticles(...o)),disabled:e.loadingMore||!e.hasMoreArticles,class:"btn btn-primary"},[e.loadingMore?(r(),i("span",at)):(r(),i("span",nt,"Ver mais artigos"))],8,ot)])])])])],64)}const ut=S(j,[["render",it],["__scopeId","data-v-f68df4f3"]]);export{ut as default};
