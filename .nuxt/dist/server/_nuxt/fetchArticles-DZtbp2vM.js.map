{"version":3,"file":"fetchArticles-DZtbp2vM.js","sources":["../../../../stores/articles.ts","../../../../middleware/fetchArticles.ts"],"sourcesContent":["// stores/articles.ts\nimport { defineStore } from 'pinia';\nimport axios from 'axios';\n\ninterface Article {\n  id: number;\n  slug: string;\n  titulo: string;\n  seo_description: string;\n  seo_keywords: string;\n  thumb?: {\n    url?: string;\n  };\n  published_at: string;\n  category: {\n    id: number;\n    title: string;\n  };\n  content: string;\n}\n\nexport const useArticleStore = defineStore('articles', {\n  state: () => ({\n    article: null as Article | null,\n  }),\n  actions: {\n    async fetchArticleBySlug(slug: string) {\n      try {\n        const response = await axios.get(`${import.meta.env.VITE_STRAPI_URL}/articles?slug=${slug}`);\n        if (response.data.length) {\n          this.article = response.data[0];\n        }\n      } catch (err) {\n        console.error('Erro ao buscar o artigo:', err);\n      }\n    },\n  },\n});\n","// middleware/fetchArticleBySlug.ts\nimport { defineNuxtRouteMiddleware, useRoute } from 'nuxt/app';\nimport { useArticleStore } from '~/stores/articles';\n\nexport default defineNuxtRouteMiddleware(async () => {\n  const articleStore = useArticleStore();\n  const route = useRoute();\n  const slug = route.params.slug as string;\n\n  // Verifica se o artigo atual corresponde ao slug, para evitar chamadas duplicadas\n  if (!articleStore.article || articleStore.article.slug !== slug) {\n    await articleStore.fetchArticleBySlug(slug);\n  }\n});\n"],"names":["__executeAsync"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;AAqBa,MAAA,kBAAkB,YAAY,YAAY;AAAA,EACrD,OAAO,OAAO;AAAA,IACZ,SAAS;AAAA,EAAA;AAAA,EAEX,SAAS;AAAA,IACP,MAAM,mBAAmB,MAAc;AACjC,UAAA;AACI,cAAA,WAAW,MAAM,MAAM,IAAI,GAAG,sCAA+B,kBAAkB,IAAI,EAAE;AACvF,YAAA,SAAS,KAAK,QAAQ;AACnB,eAAA,UAAU,SAAS,KAAK,CAAC;AAAA,QAChC;AAAA,eACO,KAAK;AACJ,gBAAA,MAAM,4BAA4B,GAAG;AAAA,MAC/C;AAAA,IACF;AAAA,EACF;AACF,CAAC;AChCC,gDAAqC,YAAA;AAAA,MAAA,QAAA;AACrC,QAAM,eAAiB;AACjB,QAAA;AAGN,QAAkB,OAAA,MAAA,OAAA;AACV,MAAA,CAAA,aAAA,WAAA,aAAA,QAAA;AACR,IAAA,CAAA,QAAA,SAAA,IAAAA,aAAA,MAAA,aAAA,mBAAA,IAAA,CAAA,GAAA,MAAA,QAAA,UAAA;AAAA,EACD;;"}