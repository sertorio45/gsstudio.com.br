{"version":3,"file":"_slug_-BOoRQhWW.js","sources":["../../../../pages/artigos/[slug].vue"],"sourcesContent":["<template>\n  <main>\n    <section class=\"my-5\" id=\"article-detail\">\n      <div class=\"container my-5\">\n        <div class=\"row\">\n          <div class=\"col-2\">\n            <div class=\"sticky-top\">\n              <button @click=\"goBack\" class=\"btn btn-primary-border \">< Voltar</button>\n            </div>\n          </div>\n          <div class=\"col-7\">\n            <div v-if=\"loading\">\n              <div class=\"d-flex mb-3\">\n                <div class=\"skeleton skeleton-category me-2\"></div> <div class=\"skeleton skeleton-date\"></div>\n              </div>\n              <div class=\"skeleton skeleton-title mb-3\"></div>\n              <div class=\"skeleton skeleton-img mb-3\"></div>\n              <div class=\"skeleton skeleton-content mb-3\"></div>\n            </div>\n            <div v-else-if=\"article\">\n              <div class=\"mb-3\">\n                <span class=\"article-category\">{{ article.category.title }}</span>\n                <span v-html=\"formatDate(article.published_at)\" class=\"mx-5\"></span>\n              </div>\n              <h1>{{ article.titulo }}</h1>\n              <div class=\"my-4\">\n                <picture v-if=\"hasThumbnail(article)\">\n                  <source :srcset=\"getArticleImage(article)\" @load=\"onImageLoad\">\n                  <NuxtImg :src=\"getArticleImage(article)\" class=\"img-fluid blur-effect\" :class=\"{ 'blurred': !imageLoaded }\" :alt=\"article.titulo\" @load=\"onImageLoad\" lazy=\"loading\" />\n                </picture>\n                <nuxt-img v-else src=\"/thumb_blog_gsstudio.webp\" class=\"img-fluid blur-effect\" :class=\"{ 'blurred': !imageLoaded }\" alt=\"Default Image\" lazy=\"loading\" @load=\"onImageLoad\" />\n              </div>\n              <div v-html=\"article.content\"></div>\n            </div>\n            <div v-else>\n              <p>Artigo não encontrado.</p>\n            </div>\n          </div>\n          <div class=\"col-3 p-5\">\n            <div class=\"sticky-top\">\n                 <!-- Social Links -->\n            <div class=\"social-links mb-4\">\n              <a href=\"https://www.facebook.com\" class=\"d-block mb-2\" target=\"_blank\">Facebook</a>\n              <a href=\"https://www.twitter.com\" class=\"d-block mb-2\" target=\"_blank\">Twitter</a>\n              <a href=\"https://www.linkedin.com\" class=\"d-block mb-2\" target=\"_blank\">LinkedIn</a>\n            </div>\n\n            <!-- Newsletter Form -->\n            <div class=\"newsletter-cta p-4 sticky-top bg-light rounded\">\n              <h3>Assine para novas atualizações.</h3>\n              <form method=\"POST\" action=\"https://forms.hsforms.com/submissions/v3/public/submit/formsnext/multipart/20534155/d57a69e4-6f43-4768-a600-5f7d30306260\" class=\"form\">\n                <div class=\"mb-3\">\n                  <input type=\"email\" class=\"form-control\" id=\"email\" name=\"email\" placeholder=\"E-mail\" required>\n                </div>\n                <button type=\"submit\" class=\"btn btn-primary\">Inscrever-se</button>\n              </form>\n            </div>\n            </div>\n           \n          </div>\n\n        </div>\n      </div>\n    </section>\n  </main>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent, ref, onMounted } from 'vue'\nimport axios from 'axios'\nimport { useRoute, useRouter } from 'vue-router'\n\ninterface Article {\n  id: number;\n  slug: string;\n  titulo: string;\n  thumb?: {\n    url?: string;\n  };\n  published_at: string;\n  category: number;\n  content: string;\n}\n\ninterface Category {\n  id: number;\n  title: string;\n}\n\nexport default defineComponent({\n  name: 'ArticleDetail',\n  setup() {\n    const article = ref<Article | null>(null)\n    const categories = ref<Category[]>([])\n    const loading = ref(true)\n    const imageLoaded = ref(false)\n    const route = useRoute()\n    const router = useRouter()\n    const baseURL = import.meta.env.VITE_STRAPI_URL || 'https://str-gsstudio.gsstudio.com.br'\n\n    const fetchArticleBySlug = async (slug: string) => {\n      try {\n        console.log(`Fetching article from ${baseURL}/articles?slug=${slug}`)\n        const response = await axios.get(`${baseURL}/articles?slug=${slug}`)\n        console.log('Response:', response)\n        if (response.data.length) {\n          article.value = response.data[0]\n        } else {\n          console.error('Article not found')\n        }\n      } catch (error) {\n        console.error('Error fetching article:', error.response ? error.response.data : error.message)\n      } finally {\n        loading.value = false\n      }\n    }\n\n    const fetchCategories = async () => {\n      try {\n        console.log(`Fetching categories from ${baseURL}/categories`)\n        const response = await axios.get(`${baseURL}/categories`)\n        console.log('Response:', response)\n        categories.value = response.data\n      } catch (error) {\n        console.error('Error fetching categories:', error.response ? error.response.data : error.message)\n      }\n    }\n\n    const getArticleImage = (article: Article) => {\n      if (article.thumb && article.thumb.url) {\n        const url = new URL(article.thumb.url, baseURL).href\n        console.log('Generated image URL:', url)\n        return url\n      }\n      return '/thumb_blog_gsstudio.webp' // Substitua por uma URL de imagem padrão\n    }\n\n    const formatDate = (date: string) => {\n      if (!date) return ''\n      const options: Intl.DateTimeFormatOptions = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' }\n      return new Date(date).toLocaleDateString('pt-BR', options)\n    }\n\n    const getCategoryTitle = (categoryId: number) => {\n      if (!categoryId) return ''\n      const category = categories.value.find(cat => cat.id === categoryId)\n      return category ? category.title : ''\n    }\n\n    const hasThumbnail = (article: Article) => {\n      return article && article.thumb && article.thumb.url\n    }\n\n    const onImageLoad = () => {\n      imageLoaded.value = true\n    }\n\n    const goBack = () => {\n      router.go(-1)\n    }\n\n    onMounted(async () => {\n      const slug = route.params.slug as string\n      console.log('Fetching article with slug:', slug)\n      await fetchArticleBySlug(slug)\n      await fetchCategories()\n      console.log('Article:', article.value)\n      console.log('Categories:', categories.value)\n    })\n\n    return {\n      article,\n      categories,\n      loading,\n      imageLoaded,\n      getArticleImage,\n      getCategoryTitle,\n      formatDate,\n      hasThumbnail,\n      onImageLoad,\n      goBack\n    }\n  }\n})\n</script>\n\n<style scoped>\n#article-detail {\n  padding: 2rem;\n}\n.btn-primary-border {\n  border: 1px solid var(--bs-primary);\n  background: transparent;\n  color: var(--bs-primary);\n}\n@keyframes shimmer {\n  0% {\n    background-position: -200% 0;\n  }\n  100% {\n    background-position: 200% 0;\n  }\n}\n\n.skeleton {\n  background: linear-gradient(to right, #e0e0e0 0%, #f8f8f8 50%, #e0e0e0 100%);\n  background-size: 200% 100%;\n  border-radius: 4px;\n  margin: 10px 0;\n  animation: shimmer 1.5s infinite;\n}\n\n.skeleton-img {\n  width: 100%;\n  height: 400px;\n  background: linear-gradient(to right, #e0e0e0 0%, #f8f8f8 50%, #e0e0e0 100%);\n  background-size: 200% 100%;\n  animation: shimmer 1.5s infinite;\n}\n\n.skeleton-title {\n  height: 30px;\n  width: 100%;\n  background: linear-gradient(to right, #e0e0e0 0%, #f8f8f8 50%, #e0e0e0 100%);\n  background-size: 200% 100%;\n  animation: shimmer 1.5s infinite;\n}\n\n.skeleton-category {\n  height: 20px;\n  width: 30%;\n  background: linear-gradient(to right, #e0e0e0 0%, #f8f8f8 50%, #e0e0e0 100%);\n  background-size: 200% 100%;\n  animation: shimmer 1.5s infinite;\n}\n\n.skeleton-date {\n  height: 20px;\n  width: 20%;\n  background: linear-gradient(to right, #e0e0e0 0%, #f8f8f8 50%, #e0e0e0 100%);\n  background-size: 200% 100%;\n  animation: shimmer 1.5s infinite;\n}\n\n.skeleton-content {\n  height: 100px;\n  width: 100%;\n  background: linear-gradient(to right, #e0e0e0 0%, #f8f8f8 50%, #e0e0e0 100%);\n  background-size: 200% 100%;\n  animation: shimmer 1.5s infinite;\n}\n\n.blur-effect {\n  transition: filter 0.2s ease;\n}\n.blurred {\n  filter: blur(20px);\n}\n</style>\n"],"names":["article","_ssrRenderAttrs","_ssrInterpolate","hasThumbnail","_ssrRenderAttr","_ssrRenderComponent","onImageLoad"],"mappings":";;;;;;;;;;;;;;;;;;;AAyFA,MAAA,YAAe,gBAAgB;AAAA,EAC7B,MAAM;AAAA,EACN,QAAQ;AACA,UAAA,UAAU,IAAoB,IAAI;AAClC,UAAA,aAAa,IAAgB,CAAA,CAAE;AAC/B,UAAA,UAAU,IAAI,IAAI;AAClB,UAAA,cAAc,IAAI,KAAK;AACf,aAAS;AACvB,UAAM,SAAS;AACT,UAAA,UAAU;AA8BV,UAAA,kBAAkB,CAACA,aAAqB;AAC5C,UAAIA,SAAQ,SAASA,SAAQ,MAAM,KAAK;AACtC,cAAM,MAAM,IAAI,IAAIA,SAAQ,MAAM,KAAK,OAAO,EAAE;AACxC,gBAAA,IAAI,wBAAwB,GAAG;AAChC,eAAA;AAAA,MACT;AACO,aAAA;AAAA,IAAA;AAGH,UAAA,aAAa,CAAC,SAAiB;AAC/B,UAAA,CAAC,KAAa,QAAA;AACZ,YAAA,UAAsC,EAAE,SAAS,QAAQ,MAAM,WAAW,OAAO,QAAQ,KAAK;AACpG,aAAO,IAAI,KAAK,IAAI,EAAE,mBAAmB,SAAS,OAAO;AAAA,IAAA;AAGrD,UAAA,mBAAmB,CAAC,eAAuB;AAC3C,UAAA,CAAC,WAAmB,QAAA;AAClB,YAAA,WAAW,WAAW,MAAM,KAAK,CAAO,QAAA,IAAI,OAAO,UAAU;AAC5D,aAAA,WAAW,SAAS,QAAQ;AAAA,IAAA;AAG/B,UAAA,eAAe,CAACA,aAAqB;AACzC,aAAOA,YAAWA,SAAQ,SAASA,SAAQ,MAAM;AAAA,IAAA;AAGnD,UAAM,cAAc,MAAM;AACxB,kBAAY,QAAQ;AAAA,IAAA;AAGtB,UAAM,SAAS,MAAM;AACnB,aAAO,GAAG,EAAE;AAAA,IAAA;AAYP,WAAA;AAAA,MACL;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,IAAA;AAAA,EAEJ;AACF,CAAC;;;AAvLD,QAAA,sBAAA;AAAA,QAAA,QAAAC,eAAA,MAAA,CAAA,+VAAA;AAmB4BD,MAAAA,KAAAA,SAAAA;AAnB5B,UAAA,0YAAA;AAAA,EAAA,WAqBkDA,KAAAA,SAAAA;kIACV,KAACA,QAAO,SAAC,KAAY,CAtB7D,6CAAA,KAAA,WAwBqBA,aAAQ,YAAM,KAAA,EAAA,oCAAAE,eAEJC,KAAaH,QAAAA,MAAO,CA1BnD,yCAAA;AAAA,QAAA,KAAA,aAAA,KAAA,OAAA,GAAA;YA4B+B,mCAAyBI,cAAA,UAAA,KAAA,gBAAA,KAAA,OAAA,CAAA,CAAA,mBAAA;AAAG,YAAAC,mBAAM,oBAAuB;AAAA,QAAuC,KAAKL,KAAc,gBAAA,KAAA,OAAA;AAAA,QAAG,OAAI,CAAEM,yBAAW,EAAA,WAAA,CAAA,KAAA,aAAA;AAAA,QAAE,KAAI,KAAC,QAAS;AAAA,QAAA,QAAA,KAAA;AAAA,QA5BtL,MAAA;AAAA,MAAA,GAAA,MAAA,OAAA,CAAA;AAAA,YAAA,YAAA;AAAA,IAAA,OA8BoC;AAA6B,YAAAD,mBAAM,qBAAuB;AAAA,QAAsC,KAAI;AAAA,QAAgB,OAAK,CAAS,yBAAA,EAAA,WAAA,CAAA,KAAA,aAAA;AAAA,QAAE,KAAA;AAAA,QAAA,MAAA;AAAA;MA9BxK,GAAA,MAAA,OAAA,CAAA;AAAA,IAAA;AAAA,UAAA,8BAAA,KAAA,QAAA,WAAA,EAAA,cAAA;AAAA,EAAA,OAAA;AAAA,UAAA,0EAAA;AAAA,EAAA;;;;;;;;;;"}