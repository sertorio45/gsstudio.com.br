{"version":3,"file":"_slug_-BOmCV39Z.js","sources":["../../../../pages/artigos/[slug].vue"],"sourcesContent":["<template>\n  <main>\n    <section class=\"my-5\" id=\"article-detail\">\n      <div class=\"container my-5\">\n        <div class=\"row\">\n          <div class=\"col-2\">\n            <button @click=\"goBack\" class=\"btn btn-primary-border\">< Voltar</button>\n          </div>\n          <div class=\"col-7\">\n            <div v-if=\"loading\">\n              <div class=\"d-flex mb-3\">\n                <div class=\"skeleton skeleton-category me-2\"></div> <div class=\"skeleton skeleton-date\"></div>\n              </div>\n              <div class=\"skeleton skeleton-title mb-3\"></div>\n              <div class=\"skeleton skeleton-img mb-3\"></div>\n              <div class=\"skeleton skeleton-content mb-3\"></div>\n            </div>\n            <div v-else-if=\"article\">\n              <div class=\"mb-3\">\n                <span class=\"article-category\">{{ getCategoryTitle(article.category) }}</span>\n                <span v-html=\"formatDate(article.published_at)\" class=\"mx-5\"></span>\n              </div>\n              <h2>{{ article.titulo }}</h2>\n              <div class=\"my-4\">\n                <picture v-if=\"hasThumbnail(article)\">\n                  <source :srcset=\"getArticleImage(article)\" @load=\"onImageLoad\">\n                  <NuxtImg :src=\"getArticleImage(article)\" class=\"img-fluid blur-effect\" :class=\"{ 'blurred': !imageLoaded }\" :alt=\"article.titulo\" @load=\"onImageLoad\" lazy=\"loading\" />\n                </picture>\n                <nuxt-img v-else src=\"/thumb_blog_gsstudio.webp\" class=\"img-fluid blur-effect\" :class=\"{ 'blurred': !imageLoaded }\" alt=\"Default Image\" lazy=\"loading\" @load=\"onImageLoad\" />\n              </div>\n              <div v-html=\"article.content\"></div>\n            </div>\n            <div v-else>\n              <p>Artigo não encontrado.</p>\n            </div>\n          </div>\n          <div class=\"col-3\"></div>\n        </div>\n      </div>\n    </section>\n  </main>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent, ref, onMounted } from 'vue'\nimport axios from 'axios'\nimport { useRoute, useRouter } from 'vue-router'\n\nexport default defineComponent({\n  name: 'ArticleDetail',\n  setup() {\n    const article = ref(null)\n    const categories = ref([])\n    const loading = ref(true)\n    const imageLoaded = ref(false)\n    const route = useRoute()\n    const router = useRouter()\n    const baseURL = process.env.VITE_STRAPI_URL || 'https://str-gsstudio.gsstudio.com.br'\n\n    const fetchArticleBySlug = async (slug) => {\n      try {\n        console.log(`Fetching article from ${baseURL}/articles?slug=${slug}`)\n        const response = await axios.get(`${baseURL}/articles?slug=${slug}`)\n        console.log('Response:', response)\n        if (response.data.length) {\n          article.value = response.data[0]\n        } else {\n          console.error('Article not found')\n        }\n      } catch (error) {\n        console.error('Error fetching article:', error.response ? error.response.data : error.message)\n      } finally {\n        loading.value = false\n      }\n    }\n\n    const fetchCategories = async () => {\n      try {\n        console.log(`Fetching categories from ${baseURL}/categories`)\n        const response = await axios.get(`${baseURL}/categories`)\n        console.log('Response:', response)\n        categories.value = response.data\n      } catch (error) {\n        console.error('Error fetching categories:', error.response ? error.response.data : error.message)\n      }\n    }\n\n    const getArticleImage = (article) => {\n      if (article.thumb && article.thumb.url) {\n        const url = new URL(article.thumb.url, baseURL).href\n        console.log('Generated image URL:', url)\n        return url\n      }\n      return '/thumb_blog_gsstudio.webp' // Substitua por uma URL de imagem padrão\n    }\n\n    const formatDate = (date) => {\n      if (!date) return ''\n      const options = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' }\n      return new Date(date).toLocaleDateString('pt-BR', options)\n    }\n\n    const getCategoryTitle = (categoryId) => {\n      const category = categories.value.find(cat => cat.id === categoryId)\n      return category ? category.title : 'Categoria desconhecida'\n    }\n\n    const hasThumbnail = (article) => {\n      return article && article.thumb && article.thumb.url\n    }\n\n    const onImageLoad = () => {\n      imageLoaded.value = true\n    }\n\n    const goBack = () => {\n      router.go(-1)\n    }\n\n    onMounted(async () => {\n      const slug = route.params.slug\n      console.log('Fetching article with slug:', slug)\n      await fetchArticleBySlug(slug)\n      await fetchCategories()\n      console.log('Article:', article.value)\n      console.log('Categories:', categories.value)\n    })\n\n    return {\n      article,\n      categories,\n      loading,\n      imageLoaded,\n      getArticleImage,\n      getCategoryTitle,\n      formatDate,\n      hasThumbnail,\n      onImageLoad,\n      goBack\n    }\n  }\n})\n</script>\n\n<style scoped>\n#article-detail {\n  padding: 2rem;\n}\n.btn-primary-border {\n  border: 1px solid var(--bs-primary);\n  background: transparent;\n  color: var(--bs-primary);\n}\n.skeleton {\n  background-color: #e0e0e0;\n  border-radius: 4px;\n  margin: 10px 0;\n}\n.skeleton-img {\n  width: 100%;\n  height: 400px;\n}\n.skeleton-title {\n  height: 30px;\n  width: 100%;\n}\n.skeleton-category {\n  height: 20px;\n  width: 30%;\n}\n.skeleton-date {\n  height: 20px;\n  width: 20%;\n}\n.skeleton-content {\n  height: 100px;\n  width: 100%;\n}\n.blur-effect {\n  transition: filter 0.2s ease;\n}\n.blurred {\n  filter: blur(20px);\n}\n</style>\n"],"names":["article","_ssrRenderAttrs","getCategoryTitle","_ssrInterpolate","hasThumbnail","_ssrRenderAttr","_ssrRenderComponent","onImageLoad"],"mappings":";;;;;;;;;;;;;;;;;;;;AAgDA,MAAA,YAAe,gBAAgB;AAAA,EAC7B,MAAM;AAAA,EACN,QAAQ;AACA,UAAA,UAAU,IAAI,IAAI;AAClB,UAAA,aAAa,IAAI,CAAA,CAAE;AACnB,UAAA,UAAU,IAAI,IAAI;AAClB,UAAA,cAAc,IAAI,KAAK;AACf,aAAS;AACvB,UAAM,SAAS;AACT,UAAA,UAAU,QAAQ,IAAI,mBAAmB;AA8BzC,UAAA,kBAAkB,CAACA,aAAY;AACnC,UAAIA,SAAQ,SAASA,SAAQ,MAAM,KAAK;AACtC,cAAM,MAAM,IAAI,IAAIA,SAAQ,MAAM,KAAK,OAAO,EAAE;AACxC,gBAAA,IAAI,wBAAwB,GAAG;AAChC,eAAA;AAAA,MACT;AACO,aAAA;AAAA,IAAA;AAGH,UAAA,aAAa,CAAC,SAAS;AACvB,UAAA,CAAC,KAAa,QAAA;AACZ,YAAA,UAAU,EAAE,SAAS,QAAQ,MAAM,WAAW,OAAO,QAAQ,KAAK;AACxE,aAAO,IAAI,KAAK,IAAI,EAAE,mBAAmB,SAAS,OAAO;AAAA,IAAA;AAGrD,UAAA,mBAAmB,CAAC,eAAe;AACvC,YAAM,WAAW,WAAW,MAAM,KAAK,CAAO,QAAA,IAAI,OAAO,UAAU;AAC5D,aAAA,WAAW,SAAS,QAAQ;AAAA,IAAA;AAG/B,UAAA,eAAe,CAACA,aAAY;AAChC,aAAOA,YAAWA,SAAQ,SAASA,SAAQ,MAAM;AAAA,IAAA;AAGnD,UAAM,cAAc,MAAM;AACxB,kBAAY,QAAQ;AAAA,IAAA;AAGtB,UAAM,SAAS,MAAM;AACnB,aAAO,GAAG,EAAE;AAAA,IAAA;AAYP,WAAA;AAAA,MACL;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,IAAA;AAAA,EAEJ;AACF,CAAC;;;AA7ID,QAAA,sBAAA;AAAA,QAAA,QAAAC,eAAA,MAAA,CAAA,iTAAA;AAiB4BD,MAAAA,KAAAA,SAAAA;AAjB5B,UAAA,0YAAA;AAAA,EAAA,WAmBkDE,KAAAA,SAAAA;kIACV,KAACF,iBAAQ,KAAY,QApB7D,QAAA,CAAA,CAAA,6CAAA,KAAA,WAsBqBA,aAAQ,YAAM,KAAA,EAAA,oCAAAG,eAEJC,KAAaJ,QAAAA,MAAO,CAxBnD,yCAAA;AAAA,QAAA,KAAA,aAAA,KAAA,OAAA,GAAA;YA0B+B,mCAAyBK,cAAA,UAAA,KAAA,gBAAA,KAAA,OAAA,CAAA,CAAA,mBAAA;AAAG,YAAAC,mBAAM,oBAAuB;AAAA,QAAuC,KAAKN,KAAc,gBAAA,KAAA,OAAA;AAAA,QAAG,OAAI,CAAEO,yBAAW,EAAA,WAAA,CAAA,KAAA,aAAA;AAAA,QAAE,KAAI,KAAC,QAAS;AAAA,QAAA,QAAA,KAAA;AAAA,QA1BtL,MAAA;AAAA,MAAA,GAAA,MAAA,OAAA,CAAA;AAAA,YAAA,YAAA;AAAA,IAAA,OA4BoC;AAA6B,YAAAD,mBAAM,qBAAuB;AAAA,QAAsC,KAAI;AAAA,QAAgB,OAAK,CAAS,yBAAA,EAAA,WAAA,CAAA,KAAA,aAAA;AAAA,QAAE,KAAA;AAAA,QAAA,MAAA;AAAA;MA5BxK,GAAA,MAAA,OAAA,CAAA;AAAA,IAAA;AAAA,UAAA,8BAAA,KAAA,QAAA,WAAA,EAAA,cAAA;AAAA,EAAA,OAAA;AAAA,UAAA,0EAAA;AAAA,EAAA;;;;;;;;;;"}